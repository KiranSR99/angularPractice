<div class="wrapper">
    <div class="box border mb-5 rounded p-5">
        <h2 class="text-center mb-4">User Details Form</h2>
        <form #myForm="ngForm" (ngSubmit)="onDetailSubmit()">
            <div class="row mb-4">
                <div class="col">
                    <label class="form-label" for="name">Name</label>
                    <input type="text" (blur)="showAlert(inputName.invalid && inputName.touched ? 'Please enter a valid name.' : '')" #inputName="ngModel" name="name" id="name" class="form-control"
                        [(ngModel)]="personDetail.name" required>
                    <small *ngIf="inputName.invalid && inputName.touched">Please enter a valid name.</small>
                </div>
                <div class="col">
                    <label class="form-label" for="email">Email</label>
                    <input type="email" (blur)="showAlert(inputEmail.invalid && inputEmail.touched ? 'Please enter a valid email.' : '')" #inputEmail="ngModel" name="email" id="email" class="form-control"
                        [(ngModel)]="personDetail.email" required pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$">
                    <small *ngIf="inputEmail.invalid && inputEmail.touched">Please enter a valid email.</small>

                </div>
            </div>

            <div class="row mb-4">
                <div class="col">
                    <label class="form-label" for="phone">Phone Number</label>
                    <input type="text" maxlength="10" minlength="10" (blur)="showAlert(inputPhone.invalid && inputPhone.touched ? 'Please enter a valid phone number.' : '')" #inputPhone="ngModel" name="phone" id="phone" class="form-control"
                        [(ngModel)]="personDetail.phone" (input)="onPhoneInput($event)" required>
                    <small *ngIf="inputPhone.invalid && inputPhone.touched">Please enter a valid phone number.</small>

                </div>
                <div class="col">
                    <label class="form-label" for="address">Address</label>
                    <input type="text" (blur)="showAlert(inputAddress.invalid && inputAddress.touched ? 'Please enter a valid address.' : '')" #inputAddress="ngModel" name="address" id="address" class="form-control"
                        [(ngModel)]="personDetail.address" required>
                    <small *ngIf="inputAddress.invalid && inputAddress.touched">Please enter a valid address.</small>

                </div>
            </div>

            <div class="row mb-4">
                <div class="col">
                    <label class="form-label" for="name">Date of Birth</label>
                    <input type="date" (blur)="showAlert(inputDOB.invalid && inputDOB.touched ? 'Please enter a valid date of birth.' : '')" #inputDOB="ngModel" (input)="calculateAge()" name="dob" id="dob"
                        class="form-control" [(ngModel)]="personDetail.dob" required>
                    <small *ngIf="inputDOB.invalid && inputDOB.touched">Please enter a valid date of birth.</small>

                </div>
                <div class="col-6" *ngIf="personDetail.dob">
                    <label class="form-label" for="email">Age</label>
                    <input type="text" name="age" id="age" class="form-control" [(ngModel)]="personDetail.age" disabled>
                    <span></span>
                </div>
            </div>

            <div class="text-center mt-5">
                <button class="btn btn-success block" [disabled]="!myForm.valid">Submit</button>
            </div>
        </form>
    </div>

    <table class="user-table text-center table table-dark table-stripped table-hover">
        <thead>
            <tr>
                <th>S.N</th>
                <th>Name</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Address</th>
                <th>DOB</th>
                <th>Age</th>
            </tr>
        </thead>

        <tbody>
            <tr *ngFor="let item of personDetailList; let i = index">
                <td>{{i + 1}}</td>
                <td>{{personDetailList[i].name}}</td>
                <td>{{personDetailList[i].email}}</td>
                <td>{{personDetailList[i].phone}}</td>
                <td>{{personDetailList[i].address}}</td>
                <td>{{personDetailList[i].dob}}</td>
                <td>{{personDetailList[i].age}}</td>
            </tr>
        </tbody>
    </table>
</div>